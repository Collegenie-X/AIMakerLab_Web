# 사용자 대시보드 시스템 가이드

## 개요

사용자 인증 및 대시보드 시스템이 구현되었습니다. 로그인한 사용자는 자신의 강의, 댓글, 갤러리를 관리할 수 있는 개인 대시보드에 접근할 수 있습니다.

## 주요 기능

### 1. 인증 시스템

#### 회원가입
- 이메일과 비밀번호로 회원가입
- 필수 약관 동의 (이용약관, 개인정보취급방침)
- 선택 약관 (마케팅 정보 수신)
- 이메일 인증 필요 (데모 환경에서는 자동으로 인증 링크 제공)

#### 로그인
- 이메일/비밀번호 로그인
- 소셜 로그인 (Google, Kakao) - UI만 구현, 실제 연동 필요
- 비밀번호 찾기 기능
- 로그인 성공 시 세션 저장 및 자동 페이지 새로고침

#### 로그아웃
- 헤더 또는 모바일 메뉴에서 로그아웃 가능
- 세션 정보 삭제 및 페이지 새로고침

### 2. 헤더 사용자 메뉴

로그인 상태에 따라 헤더 우측 상단이 다르게 표시됩니다:

#### 로그인 전
- "로그인" 버튼 표시

#### 로그인 후
- 사용자 이메일이 표시된 버튼
- 클릭 시 드롭다운 메뉴 표시:
  - 프로필
  - 나의 강의
  - 댓글 관리
  - 갤러리 관리
  - 로그아웃

### 3. 모바일 메뉴

모바일에서도 로그인 상태가 반영됩니다:

#### 로그인 전
- 로그인 버튼 표시
- 일반 메뉴만 표시

#### 로그인 후
- 사용자 이메일과 로그아웃 버튼 표시
- "내 대시보드" 메뉴가 최상단에 추가
- 일반 메뉴도 계속 표시

### 4. 대시보드 페이지

#### 레이아웃
- 좌측: 고정 사이드바 네비게이션
- 우측: 메인 콘텐츠 영역
- 현재 페이지는 강조 표시

#### 대시보드 홈 (`/dashboard`)
- 사용자 환영 메시지
- 주요 통계 카드:
  - 수강 중인 강의 수
  - 작성한 댓글 수
  - 갤러리 항목 수
  - 평균 학습 진행률
- 최근 수강 강의 목록
- 빠른 링크

#### 프로필 페이지 (`/dashboard/profile`)
- 프로필 정보 탭:
  - 이름, 이메일, 연락처, 주소 수정
  - 이메일은 변경 불가
- 보안 설정 탭:
  - 비밀번호 변경
  - 현재 비밀번호 확인 필요

#### 나의 강의 (`/dashboard/courses`)
- 수강 중인 강의 목록 표시
- 강의 상태별 배지 (진행중, 예정, 완료)
- 진행률 표시
- 강의 상세보기 링크
- 빈 상태: 새로운 강의 찾기 버튼

#### 댓글 관리 (`/dashboard/comments`)
- 작성한 댓글 목록
- 댓글이 달린 게시물 링크
- 댓글 수정/삭제 기능
- 게시물 타입별 배지 (작품, 후기, 강의)

#### 갤러리 관리 (`/dashboard/gallery`)
- 업로드한 작품/후기 목록
- 필터링 (전체, 작품, 후기)
- 상태별 배지 (공개, 비공개, 검토중)
- 조회수 및 좋아요 수 표시
- 보기/수정/삭제 기능
- 새 항목 추가 버튼

## 파일 구조

```
frontend/
├── components/
│   ├── header/
│   │   ├── index.tsx          # 헤더 컴포넌트 (로그인 상태 반영)
│   │   └── config.ts          # 헤더 설정
│   ├── login-dialog.tsx       # 로그인/회원가입 다이얼로그
│   ├── user-menu-dropdown.tsx # 사용자 메뉴 드롭다운
│   └── mobile-drawer.tsx      # 모바일 메뉴 (로그인 상태 반영)
├── app/
│   └── dashboard/
│       ├── layout.tsx         # 대시보드 레이아웃
│       ├── page.tsx           # 대시보드 홈
│       ├── profile/
│       │   └── page.tsx       # 프로필 관리
│       ├── courses/
│       │   └── page.tsx       # 나의 강의
│       ├── comments/
│       │   └── page.tsx       # 댓글 관리
│       └── gallery/
│           └── page.tsx       # 갤러리 관리
└── lib/
    └── auth/
        └── email-verification.ts  # 인증 관련 함수
```

## 주요 함수 (lib/auth/email-verification.ts)

### 인증 관련
- `signUp(email, password)`: 회원가입
- `loginWithPassword(email, password)`: 로그인
- `verifyEmail(email, token)`: 이메일 인증
- `generatePasswordReset(email)`: 비밀번호 재설정 토큰 생성
- `resetPassword(email, token, newPassword)`: 비밀번호 재설정
- `updatePassword(email, currentPassword, newPassword)`: 비밀번호 변경

### 세션 관리
- `setCurrentUser(email)`: 로그인 세션 저장
- `getCurrentUser()`: 현재 로그인한 사용자 이메일 가져오기
- `isLoggedIn()`: 로그인 여부 확인
- `logout()`: 로그아웃

## 보안 고려사항

### 현재 데모 환경
- LocalStorage를 사용한 클라이언트 측 인증
- 비밀번호를 평문으로 저장 (데모용)
- 토큰을 브라우저에 저장

### 프로덕션 환경 전환 시 필요사항
1. **백엔드 API 연동**
   - Django REST Framework와 연동
   - JWT 또는 Session 기반 인증 구현

2. **비밀번호 보안**
   - 백엔드에서 bcrypt 등으로 해싱
   - HTTPS 사용 필수

3. **토큰 관리**
   - HttpOnly 쿠키 사용
   - CSRF 토큰 구현

4. **데이터 검증**
   - 서버 측 유효성 검사
   - SQL Injection 방지
   - XSS 방지

## 데이터 연동 TODO

각 페이지에는 백엔드 API 연동이 필요한 부분이 주석으로 표시되어 있습니다:

```typescript
// TODO: 백엔드 API에서 사용자의 강의 목록 가져오기
// TODO: 백엔드 API로 댓글 수정 요청
// TODO: 백엔드 API로 갤러리 아이템 삭제 요청
```

### API 엔드포인트 예시

```
GET  /api/users/me/courses/      # 나의 강의 목록
GET  /api/users/me/comments/     # 나의 댓글 목록
PUT  /api/comments/:id/          # 댓글 수정
DELETE /api/comments/:id/        # 댓글 삭제
GET  /api/users/me/gallery/      # 나의 갤러리 항목
POST /api/gallery/               # 갤러리 항목 생성
PUT  /api/gallery/:id/           # 갤러리 항목 수정
DELETE /api/gallery/:id/         # 갤러리 항목 삭제
```

## 사용자 플로우

### 신규 사용자
1. 헤더에서 "로그인" 클릭
2. "회원가입" 탭으로 전환
3. 이메일, 비밀번호 입력 및 약관 동의
4. 회원가입 완료
5. 이메일 인증 링크 클릭 (데모에서는 자동 제공)
6. 로그인

### 기존 사용자
1. 헤더에서 "로그인" 클릭
2. 이메일, 비밀번호 입력
3. 로그인 성공 → 페이지 새로고침
4. 헤더에 이메일 표시
5. 클릭하여 대시보드 메뉴 접근

### 대시보드 사용
1. 헤더 또는 모바일 메뉴에서 원하는 페이지 선택
2. 강의/댓글/갤러리 관리
3. 프로필 정보 수정
4. 비밀번호 변경

## 반응형 디자인

- **데스크톱**: 전체 기능 사용 가능
- **태블릿**: 대시보드 사이드바 유지
- **모바일**: 
  - 헤더 간소화
  - 햄버거 메뉴 사용
  - 대시보드 사이드바 숨김 (추후 모바일 최적화 필요)

## 스타일링

- Tailwind CSS 사용
- shadcn/ui 컴포넌트 활용
- 일관된 색상 시스템:
  - Primary: 파란색 (Blue-600)
  - Success: 초록색 (Green-600)
  - Warning: 주황색 (Orange-600)
  - Danger: 빨간색 (Red-600)

## 테스트 계정

데모 환경에서 테스트하려면:

1. 회원가입으로 새 계정 생성
2. 이메일 인증 링크 클릭 (콘솔에 표시됨)
3. 로그인하여 대시보드 기능 테스트

## 문제 해결

### 로그인이 유지되지 않는 경우
- 브라우저의 LocalStorage가 활성화되어 있는지 확인
- 시크릿 모드에서는 세션이 유지되지 않을 수 있음

### 페이지가 새로고침되지 않는 경우
- 브라우저 캐시 삭제
- 하드 리프레시 (Cmd+Shift+R 또는 Ctrl+Shift+R)

### 대시보드 접근 불가
- 로그인 상태 확인
- 세션 만료 여부 확인
- 다시 로그인 시도

## 향후 개선사항

1. **기능 추가**
   - 프로필 이미지 업로드
   - 알림 시스템
   - 메시지 시스템
   - 수강 신청 기능

2. **UX 개선**
   - 로딩 스피너 추가
   - 에러 토스트 메시지
   - 페이지네이션
   - 검색 및 필터링 개선

3. **성능 최적화**
   - 이미지 레이지 로딩
   - 무한 스크롤
   - 데이터 캐싱

4. **접근성**
   - ARIA 레이블 추가
   - 키보드 네비게이션 개선
   - 스크린 리더 지원

## 참고

- [Next.js 문서](https://nextjs.org/docs)
- [Tailwind CSS 문서](https://tailwindcss.com/docs)
- [shadcn/ui 문서](https://ui.shadcn.com)

