{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
<style>
    .dashboard-container {
        padding: 20px;
    }
    
    .stats-section {
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .section-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #417690;
        color: #333;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }
    
    .stat-box {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #417690;
    }
    
    .stat-label {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
    }
    
    .stat-value {
        font-size: 24px;
        font-weight: bold;
        color: #333;
    }
    
    .period-btn {
        padding: 8px 16px;
        background: #417690;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        display: inline-block;
        margin-top: 20px;
    }
    
    .period-btn:hover {
        background: #2c5263;
    }
    
    .progress-bar {
        width: 100%;
        height: 20px;
        background: #e9ecef;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 5px;
    }
    
    .progress-fill {
        height: 100%;
        background: #417690;
        transition: width 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 11px;
        font-weight: bold;
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h1 style="font-size: 32px; font-weight: bold; margin-bottom: 30px;">ğŸ“Š ìƒì„¸ í†µê³„</h1>
    
    <!-- ì‚¬ìš©ì í†µê³„ -->
    <div class="stats-section">
        <div class="section-title">ğŸ‘¥ ì‚¬ìš©ì í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ ì‚¬ìš©ì</div>
                <div class="stat-value">{{ user_stats.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í™œì„± ì‚¬ìš©ì</div>
                <div class="stat-value">{{ user_stats.active|default:0 }}</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ user_stats.active_rate|default:0 }}%">
                        {{ user_stats.active_rate|floatformat:1 }}%
                    </div>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ</div>
                <div class="stat-value">{{ user_stats.verified|default:0 }}</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ user_stats.verified_rate|default:0 }}%">
                        {{ user_stats.verified_rate|floatformat:1 }}%
                    </div>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì˜¤ëŠ˜ ê°€ì…</div>
                <div class="stat-value">{{ user_stats.today|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì´ë²ˆ ì£¼ ê°€ì…</div>
                <div class="stat-value">{{ user_stats.week|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì´ë²ˆ ë‹¬ ê°€ì…</div>
                <div class="stat-value">{{ user_stats.month|default:0 }}</div>
            </div>
        </div>
    </div>
    
    <!-- ë¬¸ì˜ í†µê³„ -->
    <div class="stats-section">
        <div class="section-title">ğŸ“ ë¬¸ì˜ í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ ë¬¸ì˜</div>
                <div class="stat-value">{{ inquiry_stats.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì ‘ìˆ˜ ëŒ€ê¸°</div>
                <div class="stat-value" style="color: #ffc107;">{{ inquiry_stats.pending|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ê²€í†  ì¤‘</div>
                <div class="stat-value" style="color: #007bff;">{{ inquiry_stats.reviewing|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ê²¬ì  ë°œì†¡</div>
                <div class="stat-value" style="color: #fd7e14;">{{ inquiry_stats.quoted|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í™•ì •</div>
                <div class="stat-value" style="color: #28a745;">{{ inquiry_stats.confirmed|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì™„ë£Œ</div>
                <div class="stat-value" style="color: #17a2b8;">{{ inquiry_stats.completed|default:0 }}</div>
            </div>
        </div>
        
        <div class="section-title" style="margin-top: 30px;">ğŸ“… ì¼ì • í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ ì¼ì •</div>
                <div class="stat-value">{{ inquiry_stats.schedules.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ìˆ˜ê°• ê°€ëŠ¥</div>
                <div class="stat-value" style="color: #28a745;">{{ inquiry_stats.schedules.available|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ë§Œì„</div>
                <div class="stat-value" style="color: #dc3545;">{{ inquiry_stats.schedules.full|default:0 }}</div>
            </div>
        </div>
    </div>
    
    <!-- ì œí’ˆ í†µê³„ -->
    <div class="stats-section">
        <div class="section-title">ğŸ“¦ ì œí’ˆ í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ ì œí’ˆ</div>
                <div class="stat-value">{{ product_stats.products.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì½”ë”©/AI ì œí’ˆ</div>
                <div class="stat-value">{{ product_stats.products.coding_ai|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">êµêµ¬</div>
                <div class="stat-value">{{ product_stats.products.classroom|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í‚¤íŠ¸</div>
                <div class="stat-value">{{ product_stats.products.kits|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í• ì¸ ì¤‘</div>
                <div class="stat-value" style="color: #dc3545;">{{ product_stats.products.discounted|default:0 }}</div>
            </div>
        </div>
        
        <div class="section-title" style="margin-top: 30px;">â­ ë¦¬ë·° í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ ë¦¬ë·°</div>
                <div class="stat-value">{{ product_stats.reviews.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í‰ê·  í‰ì </div>
                <div class="stat-value">{{ product_stats.reviews.avg_rating|default:0 }}</div>
            </div>
        </div>
        
        <div class="section-title" style="margin-top: 30px;">ğŸ¥ ì˜ìƒ í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ ì˜ìƒ</div>
                <div class="stat-value">{{ product_stats.videos.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì´ ì¡°íšŒìˆ˜</div>
                <div class="stat-value">{{ product_stats.videos.total_views|default:0 }}</div>
            </div>
        </div>
    </div>
    
    <!-- ê°¤ëŸ¬ë¦¬ í†µê³„ -->
    <div class="stats-section">
        <div class="section-title">ğŸ¨ ê°¤ëŸ¬ë¦¬ í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì´ í•­ëª©</div>
                <div class="stat-value">{{ gallery_stats.total|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì‘í’ˆ</div>
                <div class="stat-value">{{ gallery_stats.works|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í›„ê¸°</div>
                <div class="stat-value">{{ gallery_stats.reviews|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì´ ì¡°íšŒìˆ˜</div>
                <div class="stat-value">{{ gallery_stats.engagement.total_views|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì´ ì¢‹ì•„ìš”</div>
                <div class="stat-value">{{ gallery_stats.engagement.total_likes|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í‰ê·  í‰ì </div>
                <div class="stat-value">{{ gallery_stats.engagement.avg_rating|default:0 }}</div>
            </div>
        </div>
    </div>
    
    <!-- ì»¤ë¦¬í˜ëŸ¼ í†µê³„ -->
    <div class="stats-section">
        <div class="section-title">ğŸ“š ì»¤ë¦¬í˜ëŸ¼ í†µê³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">ì»¤ë¦¬í˜ëŸ¼</div>
                <div class="stat-value">{{ curriculum_stats.curriculums|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">í”„ë¡œì íŠ¸</div>
                <div class="stat-value">{{ curriculum_stats.projects|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ëª¨ë“ˆ</div>
                <div class="stat-value">{{ curriculum_stats.modules|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ìë£Œ</div>
                <div class="stat-value">{{ curriculum_stats.materials|default:0 }}</div>
            </div>
        </div>
        
        <div class="section-title" style="margin-top: 30px;">ì¹´í…Œê³ ë¦¬ë³„</div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">AI êµìœ¡</div>
                <div class="stat-value">{{ curriculum_stats.categories.ai_education|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì•± ì¸ë²¤í„°</div>
                <div class="stat-value">{{ curriculum_stats.categories.app_inventor|default:0 }}</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ì•„ë‘ì´ë…¸</div>
                <div class="stat-value">{{ curriculum_stats.categories.arduino|default:0 }}</div>
            </div>
        </div>
    </div>
    
    <!-- ë’¤ë¡œ ê°€ê¸° -->
    <div>
        <a href="{% url 'admin:index' %}" class="period-btn">â† ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
</div>
{% endblock %}
